{"ast":null,"code":"var _s = $RefreshSig$();\n// hooks/useAudioPlayer.ts\nimport { useEffect, useRef, useState } from \"react\";\nexport function useAudioPlayer() {\n  _s();\n  const audioRef = useRef(null);\n  const [currentTrackId, setCurrentTrackId] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  useEffect(() => {\n    const audio = audioRef.current;\n    if (!audio) return;\n    const handleEnded = () => {\n      setIsPlaying(false);\n    };\n    audio.addEventListener(\"ended\", handleEnded);\n    return () => {\n      audio.removeEventListener(\"ended\", handleEnded);\n    };\n  }, []);\n  const togglePlay = (id, url) => {\n    if (!audioRef.current) return;\n    const audio = audioRef.current;\n    if (currentTrackId !== id) {\n      audio.pause();\n      audio.currentTime = 0;\n      audio.src = url;\n      audio.oncanplaythrough = () => {\n        audio.play().catch(err => console.error(\"Play error:\", err));\n        setIsPlaying(true);\n        setCurrentTrackId(id);\n      };\n      return;\n    }\n    if (isPlaying) {\n      audio.pause();\n      setIsPlaying(false);\n    } else {\n      audio.play().catch(err => console.error(\"Play error:\", err));\n      setIsPlaying(true);\n    }\n  };\n  return {\n    audioRef,\n    currentTrackId,\n    isPlaying,\n    togglePlay\n  };\n}\n_s(useAudioPlayer, \"cE4wG6RchG4VJ4lK6AQZBOpwmVs=\");","map":{"version":3,"names":["useEffect","useRef","useState","useAudioPlayer","_s","audioRef","currentTrackId","setCurrentTrackId","isPlaying","setIsPlaying","audio","current","handleEnded","addEventListener","removeEventListener","togglePlay","id","url","pause","currentTime","src","oncanplaythrough","play","catch","err","console","error"],"sources":["C:/Таня/test-case genesis/music-tracks-manager/src/hooks/useAudioPlayer.ts"],"sourcesContent":["// hooks/useAudioPlayer.ts\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\nexport function useAudioPlayer() {\r\n  const audioRef = useRef<HTMLAudioElement | null>(null);\r\n  const [currentTrackId, setCurrentTrackId] = useState<string | null>(null);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const audio = audioRef.current;\r\n    if(!audio) return;\r\n\r\n    const handleEnded = () => {\r\n      setIsPlaying(false)\r\n    }\r\n\r\n    audio.addEventListener(\"ended\", handleEnded)\r\n   \r\n    return() => {\r\n      audio.removeEventListener(\"ended\", handleEnded)\r\n    }\r\n  }, [])\r\n\r\n  const togglePlay = (id: string, url: string) => {\r\n\r\n    if (!audioRef.current) return;\r\n    const audio = audioRef.current;\r\n    \r\nif(currentTrackId !== id) {\r\n  audio.pause();\r\n  audio.currentTime = 0;\r\n  audio.src = url;\r\n\r\n\r\n  audio.oncanplaythrough = () => {\r\n    audio.play().catch((err) => console.error(\"Play error:\", err));\r\n    setIsPlaying(true);\r\n    setCurrentTrackId(id)\r\n  };\r\n  \r\n  return\r\n}\r\n\r\n  if(isPlaying) {\r\n    audio.pause();\r\n    setIsPlaying(false);\r\n  } else {\r\n    audio.play().catch((err) => console.error(\"Play error:\", err));\r\n    setIsPlaying(true)\r\n  }\r\n\r\n  };\r\n\r\n  return { audioRef, currentTrackId, isPlaying, togglePlay };\r\n}\r\n"],"mappings":";AAAA;AACA,SAASA,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAEnD,OAAO,SAASC,cAAcA,CAAA,EAAG;EAAAC,EAAA;EAC/B,MAAMC,QAAQ,GAAGJ,MAAM,CAA0B,IAAI,CAAC;EACtD,MAAM,CAACK,cAAc,EAAEC,iBAAiB,CAAC,GAAGL,QAAQ,CAAgB,IAAI,CAAC;EACzE,MAAM,CAACM,SAAS,EAAEC,YAAY,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;EAEjDF,SAAS,CAAC,MAAM;IACd,MAAMU,KAAK,GAAGL,QAAQ,CAACM,OAAO;IAC9B,IAAG,CAACD,KAAK,EAAE;IAEX,MAAME,WAAW,GAAGA,CAAA,KAAM;MACxBH,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC;IAEDC,KAAK,CAACG,gBAAgB,CAAC,OAAO,EAAED,WAAW,CAAC;IAE5C,OAAM,MAAM;MACVF,KAAK,CAACI,mBAAmB,CAAC,OAAO,EAAEF,WAAW,CAAC;IACjD,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMG,UAAU,GAAGA,CAACC,EAAU,EAAEC,GAAW,KAAK;IAE9C,IAAI,CAACZ,QAAQ,CAACM,OAAO,EAAE;IACvB,MAAMD,KAAK,GAAGL,QAAQ,CAACM,OAAO;IAElC,IAAGL,cAAc,KAAKU,EAAE,EAAE;MACxBN,KAAK,CAACQ,KAAK,CAAC,CAAC;MACbR,KAAK,CAACS,WAAW,GAAG,CAAC;MACrBT,KAAK,CAACU,GAAG,GAAGH,GAAG;MAGfP,KAAK,CAACW,gBAAgB,GAAG,MAAM;QAC7BX,KAAK,CAACY,IAAI,CAAC,CAAC,CAACC,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,KAAK,CAAC,aAAa,EAAEF,GAAG,CAAC,CAAC;QAC9Df,YAAY,CAAC,IAAI,CAAC;QAClBF,iBAAiB,CAACS,EAAE,CAAC;MACvB,CAAC;MAED;IACF;IAEE,IAAGR,SAAS,EAAE;MACZE,KAAK,CAACQ,KAAK,CAAC,CAAC;MACbT,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC,MAAM;MACLC,KAAK,CAACY,IAAI,CAAC,CAAC,CAACC,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,KAAK,CAAC,aAAa,EAAEF,GAAG,CAAC,CAAC;MAC9Df,YAAY,CAAC,IAAI,CAAC;IACpB;EAEA,CAAC;EAED,OAAO;IAAEJ,QAAQ;IAAEC,cAAc;IAAEE,SAAS;IAAEO;EAAW,CAAC;AAC5D;AAACX,EAAA,CAnDeD,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}